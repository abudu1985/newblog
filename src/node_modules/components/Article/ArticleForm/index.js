import React, {useEffect, useState} from 'react';
import Editor from '../../Editor/editor';
import 'components/Article/CreateArticle/style.css';
import RoundButton from 'components/RoundButton';
import { Container, Row, Col } from 'react-grid-system';
import BootstrapLikeInput from '../../BootstrapLikeInput';
import './style.css';

const ArticleForm = ({onSubmit, initialValues}) => {
    const [title, setTitle] = useState('');
    const [description, setDescription] = useState('');
    const [body, setBody] = useState('');
    const [tagList, setTagList] = useState('');

    const handleSubmit = event => {
        event.preventDefault();

        const article = {
            title,
            description,
            body,
            tagList: tagList.split(' ')
        };

        onSubmit(article)
    };

    useEffect(() => {
        if (!initialValues) {
            return
        }

        setTitle(initialValues.title);
        setDescription(initialValues.description);
        setBody(initialValues.body);
        setTagList(initialValues.tagList);
    }, [initialValues]);

    const bodyChange = (val) => {
        setBody(val);
    };

    return (
        <div className=''>
            <div className="article-save-row">
                <RoundButton
                    type='submit'
                    disabled={false}//{this.props.user.fetching || this.props.user.processing}
                    innerHtml="Save"
                    color={'green'}
                    onClick={handleSubmit}
                />
            </div>
            <br />
            <Container>
                <Row>
                    <Col md={8} offset={{ md: 2 }}>
                        <BootstrapLikeInput
                            type="text"
                            className=""
                            placeholder="Article title"
                            value={title}
                            onChange={e => setTitle(e.target.value)}
                        />
                    </Col>
                </Row>
                <br />
                <Row>
                    <Col md={8} offset={{ md: 2 }}>
                        <BootstrapLikeInput
                            type="text"
                            className=""
                            placeholder="What is this article about?"
                            value={description}
                            onChange={e => setDescription(e.target.value)}
                        />
                    </Col>
                </Row>
                <br />
                <Row>
                    <Col md={8} offset={{ md: 2 }}>
                        <BootstrapLikeInput
                            type="text"
                            className="form-control form-control-lg"
                            placeholder="Enter tags"
                            value={tagList}
                            onChange={e => setTagList(e.target.value)}
                        />
                    </Col>
                </Row>
            </Container>
            <Editor placeholder={'Write something...'} value={body} onChange={bodyChange}/>
        </div>
    )
};
export default ArticleForm;